{
  "progression": {
    "xp_required": {
      "formula": "XP_required(level) = base * (level ^ exponent)",
      "expanded": "XP_required(level) = 50 * (level ^ 2.0)",
      "config_source": "config/progression/xp.yaml",
      "variables": {
        "base": 50,
        "exponent": 2.0
      },
      "examples": {
        "level_2": 200,
        "level_10": 5000,
        "level_50": 125000,
        "level_100": 500000
      },
      "cumulative_formula": "Total_XP(N) ≈ 50 * (N³/3)",
      "cumulative_level_100": 16670000
    },
    "level_milestones": {
      "minor_milestone": {
        "interval": 5,
        "lumees": "player_level * 100",
        "auric_coin": 5,
        "gems": "player_level / 10"
      },
      "major_milestone": {
        "interval": 10,
        "lumees": "player_level * 500",
        "auric_coin": 10,
        "gems": 5,
        "max_energy_increase": 10,
        "max_stamina_increase": 5
      }
    },
    "stat_allocation": {
      "points_per_level": 5,
      "energy_per_point": 10,
      "stamina_per_point": 5,
      "hp_per_point": 100,
      "max_energy_formula": "BASE_ENERGY + (points_spent * 10)",
      "max_stamina_formula": "BASE_STAMINA + (points_spent * 5)",
      "max_hp_formula": "BASE_HP + (points_spent * 100)",
      "base_values": {
        "energy": 100,
        "stamina": 50,
        "hp": 500
      }
    }
  },
  "fusion": {
    "cost": {
      "formula": "Cost(tier) = min(base * (multiplier ^ (tier - 1)), max_cost)",
      "expanded": "Cost(tier) = min(1000 * (2.2 ^ (tier - 1)), 100000000)",
      "config_source": "config/fusion/rates.yaml",
      "variables": {
        "base": 1000,
        "multiplier": 2.2,
        "max_cost": 100000000
      },
      "tier_costs": {
        "1": 1000,
        "2": 2200,
        "3": 4840,
        "4": 10648,
        "5": 23425,
        "6": 51536,
        "7": 113379,
        "8": 249433,
        "9": 548753,
        "10": 1207256,
        "11": 2655963
      },
      "total_to_t12": 4868434
    },
    "success_rates": {
      "config_source": "config/fusion/rates.yaml:fusion_rates",
      "tier_rates": {
        "1": 75,
        "2": 70,
        "3": 65,
        "4": 60,
        "5": 55,
        "6": 50,
        "7": 45,
        "8": 40,
        "9": 35,
        "10": 30,
        "11": 25
      }
    },
    "expected_attempts": {
      "formula": "Expected_Attempts(tier) = 1 / (Success_Rate / 100)",
      "examples": {
        "tier_1": 1.33,
        "tier_5": 1.82,
        "tier_9": 2.86,
        "tier_11": 4.0
      }
    },
    "expected_total_cost": {
      "formula": "Expected_Total_Cost(tier) = Cost(tier) * Expected_Attempts(tier)",
      "examples": {
        "tier_1": 1333,
        "tier_5": 42638,
        "tier_9": 1569433,
        "tier_11": 10623852
      }
    },
    "shard_system": {
      "shards_per_failure": {
        "min": 3,
        "max": 15,
        "average": 9
      },
      "shards_for_guaranteed_fusion": 100,
      "failures_to_guarantee": {
        "formula": "Failures_to_Guarantee ≈ 100 / Average_Shards",
        "value": 11
      },
      "cost_via_shards": {
        "formula": "Shard_Cost(tier) = Cost(tier) * Failures_to_Guarantee",
        "tier_11_example": "2655963 * 11 = 29,215,593 lumees",
        "verdict": "Shards are LESS efficient than repeated RNG attempts"
      }
    },
    "element_combination": {
      "status": "OPERATIONAL",
      "config_location": "config/fusion/element_combinations.yaml",
      "combinations_defined": 36,
      "element_count": 6,
      "formula": "elements × elements = 6 × 6 = 36 combinations",
      "fallback": "Returns first parent element if combination not found in config"
    }
  },
  "ascension": {
    "enemy_hp": {
      "formula": "HP(floor) = base_hp * (growth_rate ^ floor)",
      "expanded": "HP(floor) = 1000 * (1.10 ^ floor)",
      "config_source": "config/ascension/balance.yaml",
      "variables": {
        "base_hp": 1000,
        "growth_rate": 1.10
      },
      "examples": {
        "floor_10": 2594,
        "floor_50": 117391,
        "floor_100": 13780612,
        "floor_200": 189905276229
      }
    },
    "rewards_lumees": {
      "formula": "Lumees(floor) = base_lumees * (reward_growth ^ floor)",
      "expanded": "Lumees(floor) = 50 * (1.12 ^ floor)",
      "variables": {
        "base_lumees": 50,
        "reward_growth": 1.12
      },
      "examples": {
        "floor_10": 155,
        "floor_50": 8841,
        "floor_100": 1034612,
        "floor_200": 142430742229
      }
    },
    "rewards_xp": {
      "formula": "XP(floor) = base_xp * (reward_growth ^ floor)",
      "expanded": "XP(floor) = 20 * (1.12 ^ floor)",
      "variables": {
        "base_xp": 20,
        "reward_growth": 1.12
      },
      "examples": {
        "floor_10": 62,
        "floor_50": 3536,
        "floor_100": 413845,
        "floor_200": 56972296892
      }
    },
    "stamina_cost": {
      "formula": "Stamina(floor) = base_cost + floor(floor / 10) * increase_per_10",
      "expanded": "Stamina(floor) = 5 + floor(floor / 10) * 1",
      "variables": {
        "base_cost": 5,
        "increase_per_10": 1
      },
      "examples": {
        "floor_1_to_10": 5,
        "floor_11_to_20": 6,
        "floor_21_to_30": 7,
        "floor_91_to_100": 14
      }
    },
    "attack_multipliers": {
      "x1": 1,
      "x5": 5,
      "x20": {
        "multiplier": 20,
        "lumenite_cost": 10,
        "crit_bonus": 0.2
      }
    },
    "bonus_intervals": {
      "token_every_n_floors": 5,
      "drop_charge_every_n_floors": 10,
      "fusion_catalyst_every_n_floors": 25
    },
    "milestones": {
      "floor_50": {
        "title": "Tower Climber",
        "lumees": 10000,
        "lumenite": 50
      },
      "floor_100": {
        "title": "Sky Breaker",
        "lumees": 50000,
        "lumenite": 100,
        "mythic_token": true
      },
      "floor_150": {
        "title": "Heaven Piercer",
        "lumees": 100000,
        "lumenite": 200
      },
      "floor_200": {
        "title": "Divine Ascendant",
        "lumees": 250000,
        "lumenite": 500
      }
    }
  },
  "exploration": {
    "progress_gain": {
      "formula": "Progress(sector) = progress_rate * energy_spent",
      "config_source": "config/exploration/system.yaml:progress_rates",
      "sector_rates": {
        "sector_1": 7.0,
        "sector_2": 4.5,
        "sector_3": 3.5,
        "sector_4": 2.5,
        "sector_5": 2.0,
        "sector_6": 1.5,
        "sector_7": 1.0
      },
      "matron_multiplier": 0.5
    },
    "energy_cost": {
      "formula": "Cost(sector, sublevel) = base_cost[sector] + (increment * (sublevel - 1))",
      "boss_formula": "Boss_Cost = Cost * boss_multiplier",
      "variables": {
        "increment": 1,
        "boss_multiplier": 1.5
      },
      "sector_base_costs": {
        "sector_1": 5,
        "sector_2": 8,
        "sector_3": 12,
        "sector_4": 17,
        "sector_5": 23,
        "sector_6": 30,
        "sector_7": 38
      }
    },
    "actions_to_complete": {
      "formula": "Actions = 100 / (progress_rate * energy_cost)",
      "examples": {
        "sector_1": "100 / (7.0 * 5) ≈ 3 actions",
        "sector_4": "100 / (2.5 * 17) ≈ 7 actions",
        "sector_7": "100 / (1.0 * 38) ≈ 18 actions"
      }
    },
    "capture_rate": {
      "formula": "Capture_Rate(tier, sector, level_diff) = base_rate[tier] - sector_penalty[sector] + (level_diff * 2.0)",
      "config_source": "config/exploration/system.yaml",
      "base_rates": {
        "common": 60.0,
        "uncommon": 50.0,
        "rare": 40.0,
        "epic": 30.0,
        "mythic": 20.0,
        "divine": 15.0,
        "legendary": 12.0,
        "ethereal": 10.0,
        "genesis": 8.0,
        "empyrean": 6.0,
        "void": 4.0,
        "singularity": 2.0
      },
      "sector_penalties": {
        "sector_1": 0,
        "sector_2": 3,
        "sector_3": 6,
        "sector_4": 10,
        "sector_5": 15,
        "sector_6": 20,
        "sector_7": 25
      },
      "level_modifier": 2.0,
      "example": "T12 in S7 with 10 level advantage: 2% - 25% + (10 * 2%) = -3% (cannot capture without guaranteed purification)"
    },
    "guaranteed_purification": {
      "formula": "Lumenite_Cost(tier)",
      "tier_costs": {
        "common": 50,
        "uncommon": 75,
        "rare": 100,
        "epic": 125,
        "mythic": 150,
        "divine": 300,
        "legendary": 600,
        "ethereal": 1200,
        "genesis": 2500,
        "empyrean": 5000,
        "void": 10000,
        "singularity": 25000
      }
    },
    "lumees_rewards": {
      "formula": "Lumees(sector) = base_range * (sector_scaling ^ (sector - 1))",
      "base_range": {
        "sector_1_min": 50,
        "sector_1_max": 100
      },
      "sector_scaling": 1.5,
      "examples": {
        "sector_1": "50-100",
        "sector_4": "169-337",
        "sector_7": "570-1139"
      }
    },
    "xp_rewards": {
      "formula": "XP(sector) = base_range * (sector_scaling ^ (sector - 1))",
      "base_range": {
        "sector_1_min": 10,
        "sector_1_max": 30
      },
      "sector_scaling": 1.5,
      "examples": {
        "sector_1": "10-30",
        "sector_4": "34-101",
        "sector_7": "114-341"
      }
    }
  },
  "shrines": {
    "lesser": {
      "cost_formula": "Cost(level) = base_cost * (multiplier ^ (level - 1))",
      "cost_expanded": "Cost(level) = 10000 * (2.3 ^ (level - 1))",
      "yield_formula": "Yield(level) = base_yield * (multiplier ^ (level - 1))",
      "yield_expanded": "Yield(level) = 50 * (2.3 ^ (level - 1))",
      "variables": {
        "base_cost": 10000,
        "base_yield": 50,
        "multiplier": 2.3,
        "max_level": 12,
        "max_shrines": 3
      },
      "level_progression": {
        "level_1": {"cost": 10000, "yield_per_hour": 50},
        "level_3": {"cost": 52900, "yield_per_hour": 265},
        "level_6": {"cost": 644142, "yield_per_hour": 3221},
        "level_9": {"cost": 7846827, "yield_per_hour": 39234},
        "level_12": {"cost": 95607847, "yield_per_hour": 478039}
      },
      "roi_time": {
        "formula": "ROI_Hours = Cost / Yield_Per_Hour",
        "constant_value": 200,
        "note": "ROI remains constant at 200 hours due to matched cost/yield scaling"
      },
      "invoker_bonus": 1.25
    },
    "radiant": {
      "cost_formula": "Cost(level) = 50000 * (2.3 ^ (level - 1))",
      "yield_formula": "Yield(level) = 0.05 * (1.8 ^ (level - 1))",
      "variables": {
        "base_cost": 50000,
        "base_yield": 0.05,
        "cost_multiplier": 2.3,
        "yield_multiplier": 1.8,
        "max_level": 12,
        "max_shrines": 3
      },
      "level_progression": {
        "level_1": {"cost": 50000, "yield_per_hour": 0.05},
        "level_6": {"cost": 3220710, "yield_per_hour": 1.89},
        "level_9": {"cost": 39234135, "yield_per_hour": 3.92},
        "level_12": {"cost": 478039235, "yield_per_hour": 6.84}
      },
      "daily_lumenite_3_shrines_l12": "6.84 * 24 * 3 = 492 lumenite/day",
      "note": "CHANGED: Yield multiplier reduced from 2.3 to 1.8 to fix lumenite inflation (was 34,499/day)"
    },
    "collection_cap": {
      "hours": 24,
      "formula": "Max_Collection = Yield_Per_Hour * 24"
    },
    "sell_refund_rate": 0.5
  },
  "drop_system": {
    "auric_coin_per_drop": 1,
    "max_charges": 1,
    "regen_formula": "Single charge every 300 seconds (5 minutes)",
    "daily_potential": {
      "formula": "24 hours / 5 minutes = 288 DROP commands per day",
      "total_auric_coin": 288
    },
    "class_bonuses": {
      "destroyer": 1.0,
      "adapter": 1.0,
      "invoker": 1.0
    }
  },
  "resource_regeneration": {
    "energy": {
      "base_regen_minutes": 4,
      "adapter_multiplier": 0.75,
      "adapter_regen_minutes": 3,
      "formula": "Energy_Gained = floor(time_elapsed_minutes / regen_interval)",
      "daily_regen_base": "24 * 60 / 4 = 360 energy",
      "daily_regen_adapter": "24 * 60 / 3 = 480 energy"
    },
    "stamina": {
      "base_regen_minutes": 10,
      "destroyer_multiplier": 0.75,
      "destroyer_regen_minutes": 7.5,
      "formula": "Stamina_Gained = floor(time_elapsed_minutes / regen_interval)",
      "daily_regen_base": "24 * 60 / 10 = 144 stamina",
      "daily_regen_destroyer": "24 * 60 / 7.5 = 192 stamina"
    },
    "drop_charge": {
      "regen_interval_seconds": 300,
      "formula": "If time_since_last >= 300s: grant 1 charge",
      "no_accumulation": true
    }
  },
  "gacha_rate_distribution": {
    "formula": "For each tier (highest to lowest): Rate[tier] = highest_tier_base * (decay_factor ^ tier_index)",
    "normalization": "Rate[tier] = (Rate[tier] / Σ(all rates)) * 100",
    "variables": {
      "decay_factor": 0.75,
      "highest_tier_base": 22.0
    },
    "example_level_50_all_tiers_unlocked": {
      "tier_12": {"raw_rate": 22.0, "normalized_percent": 4.5},
      "tier_11": {"raw_rate": 16.5, "normalized_percent": 3.4},
      "tier_10": {"raw_rate": 12.4, "normalized_percent": 2.5},
      "tier_3": {"raw_rate": 0.53, "normalized_percent": 0.1},
      "tier_2": {"raw_rate": 0.40, "normalized_percent": 0.08},
      "tier_1": {"raw_rate": 0.30, "normalized_percent": 0.06}
    },
    "note": "INVERTED RARITY: Higher tiers are MORE common. This may be intentional (progression-friendly) or design error."
  },
  "combat_mechanics": {
    "momentum": {
      "formula": "Damage_Multiplier = momentum_thresholds[momentum_level]",
      "thresholds": {
        "high": {"threshold": 80, "multiplier": 1.50},
        "medium": {"threshold": 50, "multiplier": 1.30},
        "low": {"threshold": 30, "multiplier": 1.20},
        "none": {"threshold": 0, "multiplier": 1.0}
      }
    },
    "critical_hit": {
      "default_multiplier": 1.5,
      "default_chance": 0.0,
      "x20_attack_crit_bonus": 0.2
    },
    "strategic_power": {
      "formula": "Strategic_Power = Σ(best_6_maidens[ATK + DEF])",
      "team_size": 6
    }
  },
  "daily_rewards": {
    "base": {
      "lumees": 1250,
      "auric_coin": 2,
      "lumenite": 2,
      "xp": 150
    },
    "streak_multiplier": {
      "formula": "Reward * (1 + 0.15 * consecutive_days)",
      "multiplier_per_day": 0.15,
      "example_7_day_streak": "1250 * (1 + 0.15 * 7) = 2562 lumees"
    },
    "completion_bonus": {
      "lumees": 800,
      "auric_coin": 3,
      "lumenite": 2,
      "xp": 350
    },
    "weekly_bonus": {
      "lumees": 10000,
      "auric_coin": 25,
      "lumenite": 10,
      "requirements": {
        "daily_quests_completed": 6,
        "min_level": 10
      }
    },
    "comeback_bonus": {
      "formula": "Reward = min(days_inactive * per_day_reward, max_days * per_day_reward)",
      "lumees_per_day": 1000,
      "auric_coin_per_day": 5,
      "max_days": 14,
      "days_inactive_required": 7,
      "example_14_day_absence": "14000 lumees + 70 auric_coin"
    }
  },
  "guild_economy": {
    "creation_cost": 50000,
    "upgrade_cost": {
      "formula": "Cost(level) = base_upgrade_cost * (upgrade_cost_multiplier ^ (level - 2))",
      "base_upgrade_cost": 25000,
      "multiplier": 2.5,
      "examples": {
        "level_2": 25000,
        "level_3": 62500,
        "level_4": 156250,
        "level_10": 24414062
      }
    },
    "member_slots": {
      "formula": "Slots(level) = base_max_members + (member_growth_per_level * (level - 1))",
      "base_max_members": 10,
      "member_growth_per_level": 2,
      "examples": {
        "level_1": 10,
        "level_10": 28,
        "level_20": 48
      }
    },
    "donation_minimum": 1000
  },
  "time_to_endgame_projections": {
    "first_t12_maiden": {
      "f2p_1hr_per_day": "35-40 weeks",
      "active_2hr_per_day": "30-35 weeks",
      "heavy_4hr_per_day": "20-25 weeks",
      "whale_lumenite": "1-2 weeks (25k lumenite for guaranteed purification)"
    },
    "full_t12_team_6_maidens": {
      "f2p": "50-70 weeks (12-18 months)",
      "active": "40-60 weeks (10-15 months)",
      "heavy": "30-40 weeks (7-10 months)"
    },
    "level_100": {
      "all_players": "80+ weeks (18+ months) active play"
    },
    "assumptions": {
      "daily_lumees_income": 277375,
      "daily_xp_income": 6000,
      "daily_fusion_attempts": 3,
      "shrine_level": 6,
      "lesser_shrines_count": 3
    }
  },
  "economic_balance": {
    "lumees_daily_net_flow": {
      "income": 277375,
      "expenditure": "70000-150000 (fusion + misc)",
      "net": "+127000 to +207000",
      "inflation_risk": "Medium (late-game L12 shrines generate 1.43M/day)"
    },
    "auric_coin_daily_net_flow": {
      "income": "290-295",
      "expenditure": "10-100 (summons)",
      "net": "+190 to +280",
      "cap_time": "4166 days to cap at 999,999",
      "inflation_risk": "Low (tight supply, high demand)"
    },
    "lumenite_daily_net_flow": {
      "income": "492 (endgame with 3x L12 radiant shrines, AFTER balance change)",
      "expenditure": "50-200 (purifications 50-25k, x20 attacks 10 each)",
      "net": "+290 to +440 daily surplus",
      "inflation_risk": "Low-Medium (balanced after 1.8x multiplier change, was critically high at 2.3x)"
    }
  },
  "notes": {
    "formula_extraction_method": "Direct code analysis + YAML parsing",
    "assumptions_made": [
      "Base power scaling is linear (20 per tier) - not explicitly defined in code",
      "Time projections assume consistent 2hr/day playtime - actual varies",
      "Shrine ROI constant assumes immediate reinvestment - player behavior varies"
    ],
    "missing_formulas": [
      "Maiden base stat generation (base_atk, base_def per tier)",
      "Leader effect multiplier calculations (income_boost, xp_boost values)"
    ],
    "recent_changes": [
      "2025-11-11: Created config/fusion/element_combinations.yaml (36 combinations)",
      "2025-11-11: Reduced radiant shrine yield_multiplier from 2.3 to 1.8 to fix lumenite inflation"
    ]
  }
}
